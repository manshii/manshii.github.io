console.log("initialized");window.addEventListener("resize",function(){var canvas=document.getElementById("mainstage");canvas.width=document.getElementById("mainstage").clientWidth;canvas.height=document.getElementById("mainstage").clientHeight});document.addEventListener("DOMContentLoaded",function(){createStarField()});function createStarField(){document.getElementById("mainstage").onmouseover=function(e){mouseEngaged=true;document.getElementById("mainstage").onmousedown=function(){mousePressed=true};document.getElementById("mainstage").onmouseup=function(){mousePressed=false};document.getElementById("mainstage").onmousemove=function(e){mouseX=e.clientX;mouseY=e.clientY-document.body.scrollTop}};document.getElementById("mainstage").onmouseout=function(){mouseEngaged=false};var starArray=[];var mouseEngaged=false;var mousePressed=false;var speedAmplifier=5;var mouseX;var mouseY;var canvas=document.getElementById("mainstage");var context=canvas.getContext("2d");calcWidth=document.getElementById("mainstage").clientWidth/10;canvas.width=document.getElementById("mainstage").clientWidth;canvas.height=document.getElementById("mainstage").clientHeight;initiateStars(canvas,starArray,calcWidth);main();var then=Date.now();function main(){var now=Date.now();var delta=now-then;update();render();then=now;requestAnimationFrame(main)}function update(){if(mousePressed===true){if(speedAmplifier<50){speedAmplifier=speedAmplifier+0.1}}else{if(speedAmplifier>1.1){speedAmplifier=speedAmplifier-0.1}}for(k=0;k<starArray.length;k++){if(mousePressed===true){if(mouseX>=starArray[k].x-500&&mouseX<=starArray[k].x+500&&mouseY>=starArray[k].y-500&&mouseY<=starArray[k].y+500){starArray[k].angle=(Math.atan2(mouseY-starArray[k].y,mouseX-starArray[k].x)*180)/Math.PI-90}}else{if(starArray[k].y<-1||starArray[k].y>canvas.height+1||starArray[k].x<-1||starArray[k].x>canvas.width+1){var remainder=starArray[k].angle%90;starArray[k].angle=starArray[k].angle+90+remainder;starArray[k].startAngle=starArray[k].angle}else{starArray[k].angle=starArray[k].startAngle}}calculateStarMovement(starArray[k])}}function render(){var distance=150;context.clearRect(0,0,canvas.width,canvas.height);if(mouseEngaged===true){drawMousePosition(mouseX,mouseY,context);for(n=0;n<starArray.length;n++){if(mouseX>=starArray[n].x-distance&&mouseX<=starArray[n].x+distance&&mouseY>=starArray[n].y-distance&&mouseY<=starArray[n].y+distance){var a=mouseX-starArray[n].x;var b=mouseY-starArray[n].y;var opacity=1-(1/distance)*Math.sqrt(a*a+b*b);var red=Math.round((255+starArray[n].color.red)/2);var green=Math.round((255+starArray[n].color.green)/2);var blue=Math.round((255+starArray[n].color.blue)/2);context.strokeStyle="rgba("+red+","+green+","+blue+","+opacity+")";context.beginPath();context.moveTo(mouseX,mouseY);context.lineTo(starArray[n].x,starArray[n].y);context.stroke();context.rect(20,20,50,50)}}}for(i=0;i<starArray.length;i++){drawSingleStar(starArray[i],context)}for(k=0;k<starArray.length;k++){for(u=0;u<starArray.length;u++){if(starArray[k].x>=starArray[u].x-distance&&starArray[k].x<=starArray[u].x+distance&&starArray[k].y>=starArray[u].y-distance&&starArray[k].y<=starArray[u].y+distance&&u!=k){var a=starArray[k].x-starArray[u].x;var b=starArray[k].y-starArray[u].y;var opacity=1-(1/distance)*Math.sqrt(a*a+b*b);var red=Math.round((starArray[k].color.red+starArray[u].color.red)/2);var green=Math.round((starArray[k].color.green+starArray[u].color.green)/2);var blue=Math.round((starArray[k].color.blue+starArray[u].color.blue)/2);context.strokeStyle="rgba("+red+","+green+","+blue+","+opacity+")";context.beginPath();context.lineWidth=3;context.moveTo(starArray[k].x,starArray[k].y);context.lineTo(starArray[u].x,starArray[u].y);context.stroke()}}}}function calculateStarMovement(target){if(mousePressed===true){if(mouseX>=target.x-500&&mouseX<=target.x+500&&mouseY>=target.y-500&&mouseY<=target.y+500){target.x-=target.speed*speedAmplifier*Math.sin(target.angle*(Math.PI/180));target.y+=target.speed*speedAmplifier*Math.cos(target.angle*(Math.PI/180))}else{target.x-=target.speed*Math.sin(target.angle*(Math.PI/180));target.y+=target.speed*Math.cos(target.angle*(Math.PI/180))}}else{if(mouseX>=target.x-500&&mouseX<=target.x+500&&mouseY>=target.y-500&&mouseY<=target.y+500){target.x-=target.speed*speedAmplifier*Math.sin(target.angle*(Math.PI/180));target.y+=target.speed*speedAmplifier*Math.cos(target.angle*(Math.PI/180))}else{target.x-=target.speed*Math.sin(target.angle*(Math.PI/180));target.y+=target.speed*Math.cos(target.angle*(Math.PI/180))}}}function drawMousePosition(mouseX,mouseY,context){context.fillStyle="rgba("+255+","+255+","+255+","+0.2+")";context.beginPath();context.arc(mouseX,mouseY,5,0,2*Math.PI);context.closePath();context.fill()}function drawSingleStar(star,context){context.fillStyle="rgba("+star.color.red+","+star.color.green+","+star.color.blue+","+0.2+")";context.beginPath();context.arc(star.x,star.y,5,0,2*Math.PI);context.closePath();context.fill()}function initiateStars(canvas,starArray,calcWidth){var starColors=[];
try{var style=getComputedStyle(document.body).getPropertyValue("--primaryHeaderColor");style=style.replace("rgb(","");style=style.replace(")","");style=style.split(" ").join("");var colors=style.split(",");var starColor={red:parseInt(colors[0]),green:parseInt(colors[1]),blue:parseInt(colors[2])};starColors.push(starColor);var secondColor={red:0,green:0,blue:255};starColors.push(secondColor)}catch(err){var starColor={red:128,green:0,blue:255};starColors.push(starColor)}for(y=0;y<calcWidth;y++){var starAngle=Math.floor(Math.random()*360)+0;var star={x:Math.floor(Math.random()*canvas.width)+0,y:Math.floor(Math.random()*canvas.height)+0,color:starColors[Math.floor(Math.random()*starColors.length)+0],angle:starAngle,startAngle:starAngle,speed:(Math.floor(Math.random()*12)+6)/15};starArray.push(star)}}};
